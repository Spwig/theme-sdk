{
  "name": "Jinja HTML",
  "scopeName": "text.html.jinja",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#template-tags"
    },
    {
      "include": "#template-variables"
    }
  ],
  "repository": {
    "comments": {
      "name": "comment.block.jinja",
      "begin": "\\{#",
      "end": "#\\}",
      "patterns": []
    },
    "template-tags": {
      "name": "meta.tag.template.jinja",
      "begin": "\\{%[-+]?",
      "end": "[-+]?%\\}",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.tag.begin.jinja"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.tag.end.jinja"
        }
      },
      "patterns": [
        {
          "include": "#keywords"
        },
        {
          "include": "#strings"
        },
        {
          "include": "#operators"
        },
        {
          "include": "#numbers"
        },
        {
          "include": "#variables"
        }
      ]
    },
    "template-variables": {
      "name": "meta.variable.template.jinja",
      "begin": "\\{\\{",
      "end": "\\}\\}",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.variable.begin.jinja"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.variable.end.jinja"
        }
      },
      "patterns": [
        {
          "include": "#filters"
        },
        {
          "include": "#strings"
        },
        {
          "include": "#operators"
        },
        {
          "include": "#numbers"
        },
        {
          "include": "#variables"
        }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.jinja",
          "match": "\\b(if|elif|else|endif|for|endfor|block|endblock|extends|include|import|from|macro|endmacro|call|endcall|filter|endfilter|set|endset|with|endwith|autoescape|endautoescape|raw|endraw|trans|endtrans|pluralize|spaceless|endspaceless|load|now|csrf_token|url|static|empty)\\b"
        },
        {
          "name": "keyword.operator.logical.jinja",
          "match": "\\b(and|or|not|in|is)\\b"
        },
        {
          "name": "constant.language.jinja",
          "match": "\\b(true|false|True|False|none|None)\\b"
        },
        {
          "name": "keyword.other.jinja",
          "match": "\\b(as|recursive|scoped|with|without|context)\\b"
        }
      ]
    },
    "filters": {
      "patterns": [
        {
          "name": "support.function.filter.jinja",
          "match": "\\|\\s*(abs|attr|batch|capitalize|center|count|d|default|dictsort|e|escape|filesizeformat|first|float|forceescape|format|groupby|indent|int|join|last|length|list|lower|map|max|min|pprint|random|reject|rejectattr|replace|reverse|round|safe|select|selectattr|slice|sort|string|striptags|sum|title|trim|truncate|truncatewords|unique|upper|urlencode|urlize|wordcount|wordwrap|xmlattr|currency|date|time|linebreaks|linebreaksbr|pluralize|slugify|yesno|add|cut|divisibleby|floatformat|get_digit|json_script|make_list|phone2numeric|stringformat|timesince|timeuntil|unordered_list)\\b"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.jinja",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.jinja",
              "match": "\\\\."
            }
          ]
        },
        {
          "name": "string.quoted.single.jinja",
          "begin": "'",
          "end": "'",
          "patterns": [
            {
              "name": "constant.character.escape.jinja",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.jinja",
          "match": "==|!=|<=|>=|<|>"
        },
        {
          "name": "keyword.operator.assignment.jinja",
          "match": "="
        },
        {
          "name": "keyword.operator.arithmetic.jinja",
          "match": "\\+|-|\\*|/|%|\\*\\*|//"
        },
        {
          "name": "keyword.operator.other.jinja",
          "match": "~|\\.|\\[|\\]|\\(|\\)|,"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.jinja",
          "match": "\\b\\d+\\.\\d+\\b"
        },
        {
          "name": "constant.numeric.integer.jinja",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "variables": {
      "patterns": [
        {
          "name": "variable.other.jinja",
          "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
        }
      ]
    }
  }
}
